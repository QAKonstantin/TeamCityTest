{"uid":"485eaacda6086b75","name":"Авторизация под разными ролями и проверка ссылок в футере","fullName":"tests.frontend.test_check_footer#test_e2e_check_footer_by_roles","historyId":"021dd1ab8da396ce28a2fe801a4f6e88","time":{"start":1711349121430,"stop":1711349170008,"duration":48578},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded while waiting for event \"page\"","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?mode=builds'>\nuser_create = <function user_create.<locals>._user_create at 0x7f8d38982560>\nrole = 'SYSTEM_ADMIN'\n\n    @pytest.mark.parametrize(\"role\", [\n        Roles.SYSTEM_ADMIN.value,\n        Roles.PROJECT_ADMIN.value,\n        Roles.AGENT_MANAGER.value,\n    ], ids=[\"By system admin\",\n            \"By project admin\",\n            \"By agent manager\"])\n    @allure.severity(allure.severity_level.NORMAL)\n    @allure.parent_suite(\"UI тесты\")\n    @allure.suite(\"Проверка футера\")\n    @allure.sub_suite(\"Футер\")\n    @allure.title(\"Авторизация под разными ролями и проверка ссылок в футере\")\n    # @pytest.mark.ui\n    @pytest.mark.footer\n    def test_e2e_check_footer_by_roles(browser, user_create, role):\n        with allure.step(f'Создание пользователя с ролью {role}'):\n            role_user = user_create(role)\n    \n        with allure.step(f\"Авторизация под ролью {role}\"):\n            main_page = AuthLoginForm(browser)\n            main_page.login(*role_user.creds)\n    \n        with allure.step(f\"Проверка ссылок в футере\"):\n>           main_page.footer.go_to_about_teamcity(close_tab=True)\n\ntests/frontend/test_check_footer.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncomponents/footer.py:29: in go_to_about_teamcity\n    self.actions.check_open_in_new_tab(self.page_url)\nactions/page_actions.py:24: in check_open_in_new_tab\n    f\"Некорректная ссылка: {new_page.value} \\n ОР: {expected_url} \\n\"\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py:59: in value\n    raise exception\nactions/page_actions.py:21: in check_open_in_new_tab\n    expect(new_page.value).to_have_url(expected_url)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._sync_base.EventInfo object at 0x7f8d389b85e0>\n\n    @property\n    def value(self) -> T:\n        while not self._future.done():\n            self._sync_base._dispatcher_fiber.switch()\n        asyncio._set_running_loop(self._sync_base._loop)\n        exception = self._future.exception()\n        if exception:\n>           raise exception\nE           playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded while waiting for event \"page\"\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py:59: TimeoutError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1711349069097,"stop":1711349069130,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1711349118117,"stop":1711349121423,"duration":3306},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_session","time":{"start":1711349121424,"stop":1711349121424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"super_admin","time":{"start":1711349121424,"stop":1711349121429,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_create","time":{"start":1711349121429,"stop":1711349121429,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded while waiting for event \"page\"","statusTrace":"browser = <Page url='http://localhost:8111/favorite/projects?mode=builds'>\nuser_create = <function user_create.<locals>._user_create at 0x7f8d38982560>\nrole = 'SYSTEM_ADMIN'\n\n    @pytest.mark.parametrize(\"role\", [\n        Roles.SYSTEM_ADMIN.value,\n        Roles.PROJECT_ADMIN.value,\n        Roles.AGENT_MANAGER.value,\n    ], ids=[\"By system admin\",\n            \"By project admin\",\n            \"By agent manager\"])\n    @allure.severity(allure.severity_level.NORMAL)\n    @allure.parent_suite(\"UI тесты\")\n    @allure.suite(\"Проверка футера\")\n    @allure.sub_suite(\"Футер\")\n    @allure.title(\"Авторизация под разными ролями и проверка ссылок в футере\")\n    # @pytest.mark.ui\n    @pytest.mark.footer\n    def test_e2e_check_footer_by_roles(browser, user_create, role):\n        with allure.step(f'Создание пользователя с ролью {role}'):\n            role_user = user_create(role)\n    \n        with allure.step(f\"Авторизация под ролью {role}\"):\n            main_page = AuthLoginForm(browser)\n            main_page.login(*role_user.creds)\n    \n        with allure.step(f\"Проверка ссылок в футере\"):\n>           main_page.footer.go_to_about_teamcity(close_tab=True)\n\ntests/frontend/test_check_footer.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncomponents/footer.py:29: in go_to_about_teamcity\n    self.actions.check_open_in_new_tab(self.page_url)\nactions/page_actions.py:24: in check_open_in_new_tab\n    f\"Некорректная ссылка: {new_page.value} \\n ОР: {expected_url} \\n\"\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py:59: in value\n    raise exception\nactions/page_actions.py:21: in check_open_in_new_tab\n    expect(new_page.value).to_have_url(expected_url)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._sync_base.EventInfo object at 0x7f8d389b85e0>\n\n    @property\n    def value(self) -> T:\n        while not self._future.done():\n            self._sync_base._dispatcher_fiber.switch()\n        asyncio._set_running_loop(self._sync_base._loop)\n        exception = self._future.exception()\n        if exception:\n>           raise exception\nE           playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded while waiting for event \"page\"\n\n../../../.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py:59: TimeoutError","steps":[{"name":"Создание пользователя с ролью SYSTEM_ADMIN","time":{"start":1711349121430,"stop":1711349121516,"duration":86},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизация под ролью SYSTEM_ADMIN","time":{"start":1711349121516,"stop":1711349134134,"duration":12618},"status":"passed","steps":[{"name":"Переход на страницу авторизации","time":{"start":1711349121516,"stop":1711349124433,"duration":2917},"status":"passed","steps":[{"name":"Переход на URL: http://localhost:8111/login.html","time":{"start":1711349121516,"stop":1711349124423,"duration":2907},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ожидание загрузки страницы","time":{"start":1711349124423,"stop":1711349124433,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Ввод данных для авторизации","time":{"start":1711349124433,"stop":1711349125063,"duration":630},"status":"passed","steps":[{"name":"Ожидаем появления элемента: #username","time":{"start":1711349124433,"stop":1711349124689,"duration":256},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ввод текста remain в элемент: #username","time":{"start":1711349124689,"stop":1711349124888,"duration":199},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ввод текста ccsNmv1SXkr в элемент: #password","time":{"start":1711349124889,"stop":1711349125063,"duration":174},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Авторизация пользователя","time":{"start":1711349125063,"stop":1711349125621,"duration":558},"status":"passed","steps":[{"name":"Клик по элементу: .loginButton","time":{"start":1711349125063,"stop":1711349125621,"duration":558},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Ожидание изменения URL на http://localhost:8111/favorite/projects","time":{"start":1711349125621,"stop":1711349134134,"duration":8513},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверка ссылок в футере","time":{"start":1711349134134,"stop":1711349170008,"duration":35874},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded while waiting for event \"page\"\n","statusTrace":"  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/tests/frontend/test_check_footer.py\", line 31, in test_e2e_check_footer_by_roles\n    main_page.footer.go_to_about_teamcity(close_tab=True)\n  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/components/footer.py\", line 29, in go_to_about_teamcity\n    self.actions.check_open_in_new_tab(self.page_url)\n  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/actions/page_actions.py\", line 24, in check_open_in_new_tab\n    f\"Некорректная ссылка: {new_page.value} \\n ОР: {expected_url} \\n\"\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 59, in value\n    raise exception\n  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/actions/page_actions.py\", line 21, in check_open_in_new_tab\n    expect(new_page.value).to_have_url(expected_url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 59, in value\n    raise exception\n","steps":[{"name":"Проверка активности кнопки: span.ring-link-inner:has-text('About TeamCity')","time":{"start":1711349134134,"stop":1711349139111,"duration":4977},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Клик по элементу: span.ring-link-inner:has-text('About TeamCity')","time":{"start":1711349139111,"stop":1711349139817,"duration":706},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ожидание загрузки страницы","time":{"start":1711349139817,"stop":1711349139847,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка, что ссылка открылась в новой вкладке","time":{"start":1711349139847,"stop":1711349170008,"duration":30161},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded while waiting for event \"page\"\n","statusTrace":"  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/actions/page_actions.py\", line 24, in check_open_in_new_tab\n    f\"Некорректная ссылка: {new_page.value} \\n ОР: {expected_url} \\n\"\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 59, in value\n    raise exception\n  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/actions/page_actions.py\", line 21, in check_open_in_new_tab\n    expect(new_page.value).to_have_url(expected_url)\n  File \"/home/runner/.local/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 59, in value\n    raise exception\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"be15b42955f87847","name":"log","source":"be15b42955f87847.txt","type":"text/plain","size":1675}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":17,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"user_create::0","time":{"start":1711349170119,"stop":1711349170134,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_session::0","time":{"start":1711349170134,"stop":1711349170142,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1711349222470,"stop":1711349225298,"duration":2828},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"UI тесты"},{"name":"severity","value":"normal"},{"name":"suite","value":"Проверка футера"},{"name":"subSuite","value":"Футер"},{"name":"tag","value":"footer"},{"name":"host","value":"fv-az532-432"},{"name":"thread","value":"8179-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.frontend.test_check_footer"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser","value":"'chromium'"},{"name":"role","value":"'SYSTEM_ADMIN'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":5,"unknown":0,"total":6},"items":[{"uid":"3c8255822126fa39","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/107//#testresult/3c8255822126fa39","status":"passed","time":{"start":1711348482115,"stop":1711348504237,"duration":22122}},{"uid":"94ea8329455c719a","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/106//#testresult/94ea8329455c719a","status":"passed","time":{"start":1711305472004,"stop":1711305502785,"duration":30781}},{"uid":"ce4253b8ec04aae6","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/105//#testresult/ce4253b8ec04aae6","status":"passed","time":{"start":1711304692936,"stop":1711304724355,"duration":31419}},{"uid":"b3a7f771bccc79d1","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/104//#testresult/b3a7f771bccc79d1","status":"passed","time":{"start":1711303775002,"stop":1711303805288,"duration":30286}},{"uid":"df3e7b59b29bb48d","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/103//#testresult/df3e7b59b29bb48d","status":"passed","time":{"start":1711303003796,"stop":1711303032779,"duration":28983}}]},"tags":["footer"]},"source":"485eaacda6086b75.json","parameterValues":["'chromium'","'SYSTEM_ADMIN'"]}