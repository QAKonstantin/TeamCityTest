{"uid":"2d6659543894f996","name":"Проверка невозможности создания билд конфигурации","fullName":"tests.backend.test_create_build_conf.TestBuildConfCreate#test_create_build_conf_with_empty_attributes","historyId":"ebf06c873d369f8bf0194f5b4bab12d6","time":{"start":1712575679052,"stop":1712575679052,"duration":0},"description":"Проверяется валидация с пустыми атрибутами билд конфигурации","descriptionHtml":"<p>Проверяется валидация с пустыми атрибутами билд конфигурации</p>\n","status":"broken","statusMessage":"ValueError: Session.request() got an unexpected keyword argument 'session'","statusTrace":"self = <api.auth_api.AuthAPI object at 0x7f08161d9930>\nuser_creds = ('', '5809787879577745982')\n\n    def auth_and_get_csrf(self, user_creds):\n        self.session.auth = user_creds\n        try:\n>           csrf_token = self.send_request(\"GET\", \"/authenticationTest.html\").text\n\napi/auth_api.py:9: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncustom_requester/custom_requester.py:35: in send_request\n    response: Response = CoverageListener(\n../../../.local/lib/python3.10/site-packages/swagger_coverage_py/listener.py:29: in __init__\n    self.response = requests.request(method, self.__uri.full, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nmethod = 'GET', url = 'http://localhost:8111/authenticationTest.html'\nkwargs = {'json': None, 'session': <requests.sessions.Session object at 0x7f08161d8520>}\nsession = <requests.sessions.Session object at 0x7f08161911e0>\n\n    def request(method, url, **kwargs):\n        \"\"\"Constructs and sends a :class:`Request <Request>`.\n    \n        :param method: method for the new :class:`Request` object: ``GET``, ``OPTIONS``, ``HEAD``, ``POST``, ``PUT``, ``PATCH``, or ``DELETE``.\n        :param url: URL for the new :class:`Request` object.\n        :param params: (optional) Dictionary, list of tuples or bytes to send\n            in the query string for the :class:`Request`.\n        :param data: (optional) Dictionary, list of tuples, bytes, or file-like\n            object to send in the body of the :class:`Request`.\n        :param json: (optional) A JSON serializable Python object to send in the body of the :class:`Request`.\n        :param headers: (optional) Dictionary of HTTP Headers to send with the :class:`Request`.\n        :param cookies: (optional) Dict or CookieJar object to send with the :class:`Request`.\n        :param files: (optional) Dictionary of ``'name': file-like-objects`` (or ``{'name': file-tuple}``) for multipart encoding upload.\n            ``file-tuple`` can be a 2-tuple ``('filename', fileobj)``, 3-tuple ``('filename', fileobj, 'content_type')``\n            or a 4-tuple ``('filename', fileobj, 'content_type', custom_headers)``, where ``'content-type'`` is a string\n            defining the content type of the given file and ``custom_headers`` a dict-like object containing additional headers\n            to add for the file.\n        :param auth: (optional) Auth tuple to enable Basic/Digest/Custom HTTP Auth.\n        :param timeout: (optional) How many seconds to wait for the server to send data\n            before giving up, as a float, or a :ref:`(connect timeout, read\n            timeout) <timeouts>` tuple.\n        :type timeout: float or tuple\n        :param allow_redirects: (optional) Boolean. Enable/disable GET/OPTIONS/POST/PUT/PATCH/DELETE/HEAD redirection. Defaults to ``True``.\n        :type allow_redirects: bool\n        :param proxies: (optional) Dictionary mapping protocol to the URL of the proxy.\n        :param verify: (optional) Either a boolean, in which case it controls whether we verify\n                the server's TLS certificate, or a string, in which case it must be a path\n                to a CA bundle to use. Defaults to ``True``.\n        :param stream: (optional) if ``False``, the response content will be immediately downloaded.\n        :param cert: (optional) if String, path to ssl client cert file (.pem). If Tuple, ('cert', 'key') pair.\n        :return: :class:`Response <Response>` object\n        :rtype: requests.Response\n    \n        Usage::\n    \n          >>> import requests\n          >>> req = requests.request('GET', 'https://httpbin.org/get')\n          >>> req\n          <Response [200]>\n        \"\"\"\n    \n        # By using the 'with' statement we are sure the session is closed, thus we\n        # avoid leaving sockets open which can trigger a ResourceWarning in some\n        # cases, and look like a memory leak in others.\n        with sessions.Session() as session:\n>           return session.request(method=method, url=url, **kwargs)\nE           TypeError: Session.request() got an unexpected keyword argument 'session'\n\n../../../.local/lib/python3.10/site-packages/requests/api.py:59: TypeError\n\nDuring handling of the above exception, another exception occurred:\n\nuser_session = <function user_session.<locals>._create_user_session at 0x7f08178a57e0>\n\n    @pytest.fixture\n    def super_admin(user_session):\n        new_session = user_session()\n        super_admin = User(SuperAdminCreds.USERNAME, SuperAdminCreds.PASSWORD, None, new_session,\n                           [\"SUPER_ADMIN\"])\n>       super_admin.api_manager.auth_api.auth_and_get_csrf(super_admin.creds)\n\nconftest.py:81: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <api.auth_api.AuthAPI object at 0x7f08161d9930>\nuser_creds = ('', '5809787879577745982')\n\n    def auth_and_get_csrf(self, user_creds):\n        self.session.auth = user_creds\n        try:\n            csrf_token = self.send_request(\"GET\", \"/authenticationTest.html\").text\n        except Exception as e:\n>           raise ValueError(f\"{e}\")\nE           ValueError: Session.request() got an unexpected keyword argument 'session'\n\napi/auth_api.py:11: ValueError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1712575679053,"stop":1712575679095,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_swagger_coverage","time":{"start":1712575679095,"stop":1712575694630,"duration":15535},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_session","time":{"start":1712575694630,"stop":1712575694630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"super_admin","time":{"start":1712575694631,"stop":1712575694631,"duration":0},"status":"broken","statusMessage":"ValueError: Session.request() got an unexpected keyword argument 'session'\n","statusTrace":"  File \"/home/runner/.local/lib/python3.10/site-packages/pluggy/_callers.py\", line 166, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/runner/.local/lib/python3.10/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n  File \"/home/runner/.local/lib/python3.10/site-packages/pluggy/_callers.py\", line 102, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/.local/lib/python3.10/site-packages/_pytest/fixtures.py\", line 1149, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/.local/lib/python3.10/site-packages/_pytest/fixtures.py\", line 923, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/conftest.py\", line 81, in super_admin\n    super_admin.api_manager.auth_api.auth_and_get_csrf(super_admin.creds)\n  File \"/home/runner/work/TeamCity_Test/TeamCity_Test/api/auth_api.py\", line 11, in auth_and_get_csrf\n    raise ValueError(f\"{e}\")\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[{"name":"user_session::0","time":{"start":1712575694792,"stop":1712575694792,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_swagger_coverage::0","time":{"start":1712575694822,"stop":1712575701772,"duration":6950},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"API тесты"},{"name":"severity","value":"normal"},{"name":"suite","value":"Управление билд конфигурациями"},{"name":"subSuite","value":"Негативные сценарии"},{"name":"tag","value":"api"},{"name":"tag","value":"build_conf"},{"name":"host","value":"fv-az525-371"},{"name":"thread","value":"7903-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.backend.test_create_build_conf"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"attribute","value":"'name'"},{"name":"status_code","value":"<HTTPStatus.BAD_REQUEST: 400>"},{"name":"text_error","value":"'BadRequestException: When creating a build type, non empty name should be provided.'"},{"name":"value","value":"''"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":10,"unknown":0,"total":12},"items":[{"uid":"5d30b49eb31a5b1c","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/221//#testresult/5d30b49eb31a5b1c","status":"broken","statusDetails":"ValueError: Session.request() got an unexpected keyword argument 'session'","time":{"start":1712574353170,"stop":1712574353170,"duration":0}},{"uid":"bd21dc6bd31098a0","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/216//#testresult/bd21dc6bd31098a0","status":"passed","time":{"start":1712408229787,"stop":1712408230048,"duration":261}},{"uid":"fe4eb965e899e57a","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/215//#testresult/fe4eb965e899e57a","status":"passed","time":{"start":1712160918627,"stop":1712160919555,"duration":928}},{"uid":"256155828b242fa5","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/214//#testresult/256155828b242fa5","status":"passed","time":{"start":1712160281008,"stop":1712160281955,"duration":947}},{"uid":"25fe9acd2c38ec9c","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/213//#testresult/25fe9acd2c38ec9c","status":"passed","time":{"start":1712158392585,"stop":1712158393588,"duration":1003}},{"uid":"28ea63de6876b6f1","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/212//#testresult/28ea63de6876b6f1","status":"passed","time":{"start":1712158077393,"stop":1712158078342,"duration":949}},{"uid":"b377bdee52a111bd","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/211//#testresult/b377bdee52a111bd","status":"passed","time":{"start":1712157571167,"stop":1712157572047,"duration":880}},{"uid":"83a1e47ad3fdebd4","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/210//#testresult/83a1e47ad3fdebd4","status":"passed","time":{"start":1711983587118,"stop":1711983588083,"duration":965}},{"uid":"56a548d6fa5c78bc","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/208//#testresult/56a548d6fa5c78bc","status":"passed","time":{"start":1711982399646,"stop":1711982400955,"duration":1309}},{"uid":"c8b7f744db7d2af7","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/207//#testresult/c8b7f744db7d2af7","status":"passed","time":{"start":1711981738670,"stop":1711981740325,"duration":1655}},{"uid":"d806f67808cc75b","reportUrl":"https://QAKonstantin.github.io/TeamCity_Test/206//#testresult/d806f67808cc75b","status":"passed","time":{"start":1711981074528,"stop":1711981075389,"duration":861}}]},"tags":["api","build_conf"]},"source":"2d6659543894f996.json","parameterValues":["'name'","<HTTPStatus.BAD_REQUEST: 400>","'BadRequestException: When creating a build type, non empty name should be provided.'","''"]}